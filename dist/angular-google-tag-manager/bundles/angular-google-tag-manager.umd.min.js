!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("angular-google-tag-manager",["exports","@angular/core"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self)["angular-google-tag-manager"]={},e.ng.core)}(this,(function(e,n){"use strict";var t=function(){function e(e,n,t,o){if(void 0===e&&(e={id:null}),this.config=e,this.googleTagManagerId=n,this.googleTagManagerAuth=t,this.googleTagManagerPreview=o,this.isLoaded=!1,this.browserGlobals={windowRef:function(){return window},documentRef:function(){return document}},null==this.config&&(this.config={id:null}),this.config=Object.assign(Object.assign({},this.config),{id:n||this.config.id,gtm_auth:t||this.config.gtm_auth,gtm_preview:o||this.config.gtm_preview}),null==this.config.id)throw new Error("Google tag manager ID not provided.")}return e.prototype.getDataLayer=function(){var e=this.browserGlobals.windowRef();return e.dataLayer=e.dataLayer||[],e.dataLayer},e.prototype.pushOnDataLayer=function(e){this.getDataLayer().push(e)},e.prototype.addGtmToDom=function(){var e=this;return new Promise((function(n,t){if(e.isLoaded)return n(e.isLoaded);var o=e.browserGlobals.documentRef();e.pushOnDataLayer({"gtm.start":(new Date).getTime(),event:"gtm.js"});var r=o.createElement("script");r.id="GTMscript",r.async=!0,r.src=e.applyGtmQueryParams("https://www.googletagmanager.com/gtm.js"),r.addEventListener("load",(function(){return n(e.isLoaded=!0)})),r.addEventListener("error",(function(){return t(!1)})),o.head.insertBefore(r,o.head.firstChild)}))},e.prototype.pushTag=function(e){var n=this;return new Promise((function(t,o){return n.isLoaded||n.addGtmToDom().then((function(){return n.pushOnDataLayer(e),t()})).catch((function(){return o()})),n.pushOnDataLayer(e),t()}))},e.prototype.applyGtmQueryParams=function(e){var n=this;return-1===e.indexOf("?")&&(e+="?"),e+Object.keys(this.config).filter((function(e){return n.config[e]})).map((function(e){return e+"="+n.config[e]})).join("&")},e}();t.ɵfac=function(e){return new(e||t)(n.ɵɵinject("googleTagManagerConfig",8),n.ɵɵinject("googleTagManagerId",8),n.ɵɵinject("googleTagManagerAuth",8),n.ɵɵinject("googleTagManagerPreview",8))},t.ɵprov=n.ɵɵdefineInjectable({token:t,factory:t.ɵfac,providedIn:"root"});var o=function(){function e(){}return e.forRoot=function(n){return{ngModule:e,providers:[{provide:"googleTagManagerConfig",useValue:n}]}},e}();o.ɵmod=n.ɵɵdefineNgModule({type:o}),o.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||o)}}),e.GoogleTagManagerModule=o,e.GoogleTagManagerService=t,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-google-tag-manager.umd.min.js.map